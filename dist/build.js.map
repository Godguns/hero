{"version":3,"sources":["webpack://dove/./main/hero/Observer.js","webpack://dove/./main/hero/array.js","webpack://dove/./main/hero/index.js","webpack://dove/./main/hero/observe.js","webpack://dove/webpack/bootstrap","webpack://dove/./hero_main/index.js"],"names":["defineReactive","data","key","value","Object","defineProperty","get","console","log","set","newValue","Observer","Array","isArray","__proto__","arrayMethods","walk","keys","i","length","create","prototype","arr_methods","observerArray","args","forEach","item","result","apply","runtime_arguments","slice","e","_init","el","_render","$el","innerHTML","$options","options","vm","$fragment","fragment","view","reg","RegExp","hasOwnProperty","replace","initState","opts","initData","observe","hr","hero","APP","a","b","c","x","y","z"],"mappings":"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","file":"build.js","sourcesContent":["import {observe} from './observe';\r\nimport {arrayMethods} from './array.js'\r\nfunction defineReactive(data,key,value){\r\n  observe(value)\r\n    Object.defineProperty(data, key, {\r\n        get() {\r\n          console.log('获取数据',value);\r\n          return value;\r\n        },\r\n        set(newValue) {\r\n          console.log('设置数据',newValue);\r\n          if (newValue === value) return;\r\n          value = newValue;\r\n        }\r\n      });\r\n\r\n}\r\nexport class Observer{\r\n    constructor(data){\r\n      if(Array.isArray(data)){\r\n        data.__proto__=arrayMethods\r\n      }else{\r\n        this.walk(data)\r\n      }\r\n      \r\n    }\r\n    walk(data){\r\n        let keys = Object.keys(data);\r\n        for(let i = 0; i < keys.length; i++) {\r\n          let key = keys[i];\r\n          let value = data[key];\r\n          defineReactive(data, key, value);\r\n        }\r\n    }\r\n\r\n    \r\n}\r\n","import { observe } from \"./observe\";\r\n\r\n// 拷贝新的对象，用来查找老的方法, 不修改原型上的方法\r\nexport let arrayMethods = Object.create(Array.prototype);\r\nlet arr_methods = [\"push\", \"pop\", \"shift\", \"unshift\", \"slice\", \"splice\"];\r\n//循环遍历arr_methods 来劫持原本的数组方法方法\r\nlet observerArray = function (args) {\r\n  for (let i = 0; i < args.length; i++) {\r\n    observe(args[i]);\r\n  }\r\n};\r\narr_methods.forEach((item) => {\r\n  //劫持方法\r\n  arrayMethods[item] = function (...args) {\r\n    let result = Array.prototype[item].apply(this, args);\r\n    console.log(\"===数组劫持===\");\r\n    let runtime_arguments;\r\n    switch (item) {\r\n      case \"push\":\r\n        runtime_arguments = args;\r\n        break;\r\n      case \"unshift\":\r\n        runtime_arguments = args;\r\n        break;\r\n      case \"splice\":\r\n        runtime_arguments = args.slice(2); //当执行splice方法的时候获取到用户给splice方法的参数（start开始位置,count结束的数量,添加的数据）\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    if (runtime_arguments) observerArray(runtime_arguments); //对用户添加或者删除的数据添加响应式\r\n    return result;\r\n  };\r\n});\r\n","import { initState } from \"./observe\";\r\nexport default class {\r\n  constructor(e) {\r\n    this._init(e);\r\n    if (this.el !== null) {\r\n      this._render(this.$el.innerHTML, this.$options.data);\r\n    }\r\n  }\r\n  _init(options) {\r\n    let vm = this;\r\n    vm.$el = options.el;\r\n    vm.$fragment = options.fragment;\r\n    vm.$options = options.data;\r\n    initState(vm);\r\n  }\r\n  /**\r\n   * _render渲染函数：\r\n   * 遍历dom节点，替换data数据\r\n   */\r\n  _render(view, data) {\r\n    for (const key in data) {\r\n      let reg = new RegExp(`{{${key}}}`, \"g\");\r\n      if (data.hasOwnProperty(key)) {\r\n        view = view.replace(reg, function () {\r\n          return data[key];\r\n        });\r\n      }\r\n    }\r\n\r\n    this.$el.innerHTML = view;\r\n  }\r\n}\r\n","import { Observer } from \"./Observer.js\";\r\nexport function initState(vm) {\r\n  let opts = vm.$options;\r\n  if (opts.data) {\r\n    //如果用户输入了data属性\r\n    initData(vm);\r\n  }\r\n}\r\n\r\nfunction initData(vm) {\r\n  let data = vm.$options.data;\r\n  //观测数据响应式\r\n  observe(vm.$options);\r\n}\r\n\r\nexport function observe(data) {\r\n  if (typeof data !== \"object\" || data == null) {\r\n    return;\r\n  }\r\n  return new Observer(data);\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import hero from \"hero\";\r\nimport APP from '../APP/APP.hero'\r\nlet hr = new hero({\r\n  el: APP,\r\n  fragment:{},\r\n  data: {\r\n    a: 1,\r\n    b: 2,\r\n    c: 3,\r\n    data: {\r\n      x: \"9\",\r\n      y: \"99\",\r\n      z:[1,2,3]\r\n    },\r\n  },\r\n});\r\n//hr.$options.data.a=33\r\n\r\n//console.log(hr);\r\n"],"sourceRoot":""}